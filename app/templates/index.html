{% extends "base.html" %}

{% block title %}Popular Movies{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1>Popular Movies</h1>

    <!-- 🔎 Пошук -->
    <div class="row mb-4">
        <div class="col-md-6">
            <input type="text" id="search-input" class="form-control" placeholder="Search movie by title...">
        </div>
        <div class="col-md-2">
            <button id="search-button" class="btn btn-primary w-100">Search</button>
        </div>
    </div>

    <!-- Сортування -->
    <div class="row mb-4">
        <div class="col-md-4">
            <select id="sort-select" class="form-select">
                <option value="popularity" selected>Sort by Popularity</option>
                <option value="release">Sort by Release Date</option>
                <option value="imdb_score">Sort by IMDb Score</option>
            </select>
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <div class="form-check me-3">
                <input class="form-check-input" type="radio" name="sort-order" id="descending" value="desc" checked>
                <label class="form-check-label" for="descending">
                    Descending
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="sort-order" id="ascending" value="asc">
                <label class="form-check-label" for="ascending">
                    Ascending
                </label>
            </div>
        </div>
    </div>

    <!-- Список фільмів -->
    <div id="movie-list" class="list-group">
        <!-- Фільми додає JavaScript -->
    </div>

    <!-- Кнопка "Показати ще" -->
    <div class="d-grid mt-4">
        <button id="load-more" class="btn btn-primary">Show More</button>
    </div>
</div>

<!-- Передача даних у JS через глобальні змінні -->
<script>
    window.movies = {{ movies_json | safe }};
    window.isAuthenticated = {{ current_user.is_authenticated | tojson | safe }};
</script>

<!-- Підключення скрипта -->
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

{% endblock %}
